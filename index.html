<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>
</head>
<body class="bg-slate-800 h-screen flex justify-center text-white">
    <main>
        <h1 class="text-2xl text-center m-4 border-b-2">Hol a piros?</h1>
        <div id="grid" class="grid gap-2 h-96 w-96 bg-gray-600 p-2 rounded-md" onclick="clicked(event)">
        </div>
        <div class="flex justify-between gap-2 my-2 text-xl">
            <input type="button" value="Újra" class="bg-blue-500 w-full rounded-md transition-all active:scale-95 py-2" onclick="start()">
            <p id="clicks" class="flex items-center">0</p>
            <input type="text" placeholder="Méret" id="size" class="bg-blue-500 w-full rounded-md transition-all active:scale-95 outline-none p-2 text-center">
        </div>
    </main>

    <script>
        const grid = document.querySelector("#grid")

        let size
        let rand
        let clicks = 0

        function clicked(event) {
            console.log(rand);
            console.log(event.target.dataset.red == true);
            if (event.target.dataset.red) event.target.style.backgroundColor = "red"
            else {
                event.target.classList.remove("cursor-pointer")
                event.target.style.backgroundColor = "rgb(75, 85, 99)"
            }
            clicks++
            document.getElementById("clicks").textContent = clicks
        }

        function start() {
            size = +document.getElementById("size").value
            if(size <= 0) size = 1
            else if(size > 12) size = 12
            rand = random(0, size*size)
            console.log(size);
            grid.classList = "grid gap-2 h-96 w-96 bg-gray-600 p-2 rounded-md"
            grid.classList.add(`grid-cols-${size}`)
            grid.classList.add(`grid-rows-${size}`)
            while (grid.firstChild) { grid.removeChild(grid.lastChild) }
            for (let i = 0; i < size*size; i++) {
                if (i == rand) grid.innerHTML += '<div data-red="1" class="h-full w-full bg-gray-700 rounded-md cursor-pointer transition-all hover:scale-110"></div>'
                else grid.innerHTML += '<div class="h-full w-full bg-gray-700 rounded-md cursor-pointer transition-all hover:scale-110"></div>'
            }
            if (e.target.classList.contains("cursor-pointer")) clicks = 0
        }

        function random(min, max) {
            return Math.floor(Math.random() * (max - min) + min)
        }

    </script>

</body>
</html>